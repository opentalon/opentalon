# Copy to config.yaml (or ~/.opentalon/config.yaml) and set your API key.
# config.yaml is gitignored so you don't commit secrets.

models:
  providers:
    # DeepSeek — OpenAI-compatible API (free tier available)
    deepseek:
      base_url: "https://api.deepseek.com/v1"
      api_key: "${DEEPSEEK_API_KEY}"
      api: openai-completions
      models:
        - id: deepseek-chat
          name: DeepSeek Chat
          input: [text]
          context_window: 128000
          cost:
            input: 0.14
            output: 0.28
        - id: deepseek-reasoner
          name: DeepSeek Reasoner
          reasoning: true
          input: [text]
          context_window: 128000
          cost:
            input: 0.55
            output: 2.19

  catalog:
    deepseek/deepseek-chat:
      alias: deepseek
      weight: 80
    deepseek/deepseek-reasoner:
      alias: deepseek-r
      weight: 20

routing:
  primary: deepseek/deepseek-chat
  fallbacks:
    - deepseek/deepseek-reasoner

orchestrator:
  rules: []
  # Run these plugin actions before the first LLM call; their output becomes the user message (or they can block with send_to_llm: false).
  content_preparers:
    - plugin: hello-world
      action: prepare
      arg_key: text

channels:
  console:
    enabled: true
    # Local path (after running: make setup)
    path: "./channels/console-channel/console"
    # Or use GitHub refs — core auto-fetches, builds, and pins in channels.lock:
    # github: "opentalon/console-channel"
    # ref: "master"
    config: {}

plugins:
  hello-world:
    enabled: true
    # Local path (after running: make setup)
    path: "./plugins/hellow-world-plugin/hello-world-plugin"
    # Or use GitHub refs — core auto-fetches, builds, and pins in plugins.lock:
    # github: "opentalon/hellow-world-plugin"
    # ref: "master"
    config: {}

# Request packages: skill-style API calls (no compiled plugin). Core runs HTTP requests from templates.
# Use {{env.VAR}} and {{args.param}} in url/body/headers. Guardrails: required_env validated before request.
# To reuse OpenClaw/ClawHub skills you can:
#   - skills_path: local dir of skill subdirs (each subdir: SKILL.md or request.yaml)
#   - skills: list of skill names; core downloads them by name (clone only, no build). Use default repo
#     or per-skill github/ref. One repo can host many skills (monorepo): set default_skill_github and
#     default_skill_ref; each list entry is the subdir name (e.g. jira-create-issue).
# request_packages:
#   path: ./request-pkgs   # optional: load .yaml files (each file = one plugin set)
#   skills_path: ./skills  # optional: local OpenClaw-style skills (each subdir: SKILL.md or request.yaml)
#   default_skill_github: openclaw/skills   # default repo when using skills: [name, ...]
#   default_skill_ref: main
#   skills: [jira-create-issue, slack-send] # download these by name (from default repo or per-skill github/ref)
#   # Or per-skill repo (object form):
#   # skills:
#   #   - name: jira-create-issue
#   #     github: openclaw/skill-jira
#   #     ref: main
#   inline:
#     - plugin: jira
#       description: Create and manage Jira issues
#       packages:
#         - action: create_issue
#           description: Create a Jira issue in a project
#           method: POST
#           url: "{{env.JIRA_URL}}/rest/api/3/issue"
#           body: '{"fields":{"project":{"key":"{{args.project}}"},"summary":"{{args.summary}}","description":"{{args.description}}","issuetype":{"name":"Task"}}}'
#           headers:
#             Authorization: "Bearer {{env.JIRA_API_TOKEN}}"
#           required_env: [JIRA_URL, JIRA_API_TOKEN]
#           parameters:
#             - name: project
#               description: Project key (e.g. OPS)
#               required: true
#             - name: summary
#               description: Issue summary
#               required: true
#             - name: description
#               description: Issue description
#               required: false

# Lua plugins: embedded scripts as content preparers (no compiled binary).
# Use scripts_dir for local .lua files, or plugins + default_github/ref to download by name from GitHub.
# In content_preparers use plugin: "lua:hello-world" to run the hello-world Lua script.
# lua:
#   scripts_dir: ./scripts   # local .lua files (e.g. scripts/hello-world.lua)
#   default_github: opentalon/lua-plugins   # one repo, one subdir per plugin (e.g. hello-world/hello-world.lua)
#   default_ref: master
#   plugins: [hello-world]   # download these by name; or per-plugin: - name: X; github: org/repo; ref: main

state:
  data_dir: ~/.opentalon

# When LOG_LEVEL=debug, what we send to the LLM is logged (helps verify plugin output).
log:
  file: ~/.opentalon/opentalon.log
